name: per-row-csv
inputs:
  connector: local_docs
  select: ["**/*.csv"]
  mode: table_rows
  table:
    text_column: message
steps:
  - id: classify
    prompt: |
      inline: Classify sentiment for the following text:
      {{ text }}
    inputs:
      text: "${row.text}"
    output: sentiment
outputs:
  - save: artefacts/${run_id}/per_row.jsonl
    from: sentiment
    as: jsonl
