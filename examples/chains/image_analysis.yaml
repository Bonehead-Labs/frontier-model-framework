name: image-analysis
inputs:
  connector: local_images
  select: ["**/*.{png,jpg,jpeg}"]
steps:
  - id: describe
    mode: multimodal
    prompt: |
      inline: Return a JSON object with keys 'objects' and 'colors' describing the image.
    inputs: {}
    output:
      name: analysis
      expects: json
      parse_retries: 1
      schema: { type: object, required: [objects, colors] }
outputs:
  - save: artefacts/${run_id}/image_analysis.jsonl
    from: analysis
    as: jsonl
